function is_FB(){return typeof FB=="object"}function set_fanStatus(){$.get(cfg.paths.ajax+"customer/set-fan",{is_fan:1},function(){needToReload(),$("#fanDiscountDynMsg").text(cfg.i18n.fanDiscountMsg),$("#fanDiscountMsg, #fanDiscountMsg > span").animate({color:"#000"},300,function(){$(this).delay(1e3).animate({color:"#999"},2e3)})})}function unset_fanStatus(){$.get(cfg.paths.ajax+"customer/set-fan",{is_fan:0},function(){needToReload(),$("#fanDiscountDynMsg").text(cfg.i18n.nonFanDiscountMsg),$("#fanDiscountMsg, #fanDiscountMsg > span").animate({color:"#000"},300,function(){$(this).delay(1e3).animate({color:"#999"},2e3)})})}function needToReload(){if(window.location.href.indexOf(cfg.paths.base+"cart/")!=-1||window.location.href.indexOf(cfg.paths.base+"review-order/")!=-1)window.location.href=window.location.href}(function(a){a.imgPreLoad=function(){function h(){return window.Image?new Image:document.createElement("img")}function i(b,c){var d=h(),e=function(d){var e=this,f=arguments;clearTimeout(g),a(this).unbind("load error"),b[1].apply(e,f),c.apply(e,f)};d.src=b[0],d.complete?e.call(d,{type:"cacheLoad"}):(clearTimeout(g),g=setTimeout(function(){e.call(d,{type:"timeouterror"})},f),a(d).bind("load error",e))}function j(){if(b.length&&c){d=!0;var a=b.shift();i(a,j)}else d=!1}function k(){d=!1,c=!1}function l(){e&&(c=!0,j())}function m(a,b){k(),b=b||function(){},i([a,b],l)}var b=[],c=!1,d=!1,e=!1,f=5e3,g;return{add:function(a,e,f){e=e||function(){},a=[a,e],f?b.unshift(a):b.push(a),c&&!d&&j()},loadNow:m,ready:function(){e=!0,c=!0,j()}}}(),a.windowLoaded?a.imgPreLoad.ready():a(window).bind("load",a.imgPreLoad.ready)})(jQuery),$.fn.focusBlur=function(){var a=$(this).val();$(this).focus(function(){$(this).val()==a&&$(this).addClass("focus").val("")}).blur(function(){$(this).val()==""&&$(this).removeClass("focus").val(a)})},function(a){a.fn.extend({actual:function(b,c){var d,e,f,g,h,i,j,k;if(!this[b])throw'$.actual => The jQuery method "'+b+'" you called does not exist';return f=a.extend({absolute:!1,clone:!1,includeMargin:undefined},c),e=this,f.clone===!0?(j=function(){e=e.filter(":first").clone().css({position:"absolute",top:-1e3}).appendTo("body")},k=function(){e.remove()}):(j=function(){d=e.parents().andSelf().filter(":hidden"),g=f.absolute===!0?{position:"absolute",visibility:"hidden",display:"block"}:{visibility:"hidden",display:"block"},h=[],d.each(function(){var a={},b;for(b in g)a[b]=this.style[b],this.style[b]=g[b];h.push(a)})},k=function(){d.each(function(a){var b=h[a],c;for(c in g)this.style[c]=b[c]})}),j(),i=/(outer)/g.test(b)?e[b](f.includeMargin):e[b](),k(),i}})}(jQuery),$.fn.FB_likeCallback=function(setFunctionName,unsetFunctionName){is_FB()?(FB.Event.subscribe("edge.create",eval(setFunctionName)),unsetFunctionName!=undefined&&FB.Event.subscribe("edge.remove",eval(unsetFunctionName))):setTimeout($(this).FB_likeCallback,1e3,setFunctionName,unsetFunctionName)};var Webtrekk={addToCart:function(a){var b={productQuantity:"1",productStatus:"add",productCost:a.price,product:a.product_id,productCategory:{1:a.shop_slug,2:a.title},customEcommerceParameter:{4:a.currency}};typeof wt!=undefined?wt.sendinfo(b):Console.log("wt doesn't exsit (Webtrekk)")}};(function(a){a.widget("Ondango.combobox",{id:"",cb:null,list:null,items:null,found_item:-1,found_pressedKey:"",caption:"",options:{cb_class:"",hide_label:!1,is_disabled:!1,changed_callback:function(a){}},_create:function(){var b=this,c="ui-combobox"+(this.options.cb_class.length?" "+this.options.cb_class:"")+(this.options.is_disabled?" disabled":"");this.id=(new Date).getTime(),this.cb=a('<div id="cbMain_'+this.id+'" class="'+c+'"><span></span><em></em></div>'),this.list=a(this._get_list()),this.list.appendTo("body"),this.items=a(".option",this.list),this.element.hide(),this._init_caption(),this.cb.insertAfter(this.element).css("width",this._get_cbWidth(this.cb)),this.options.is_disabled||this._bind_main_events(),this.list.css("width",this._get_cbWidth(this.list)),this.items.each(function(c){a(this).click(function(d){a(this).is(".disabled")||(b._center_scroll(c),b.select(a(d.currentTarget),c))})})},select:function(b,c){var d=this;a(d.items[d.selectedIndex]).removeClass("selected"),b.addClass("selected"),d.found_item=-1,d.found_pressedKey="",d.selectedIndex=c,d.caption.text(b.text()),d.element.val(b.attr("data-value")),d.element.trigger("change"),d.options.changed_callback(d.element)},close:function(){this.cb.removeClass("focus"),this.list.hide()},close_allOptions:function(){var b=this;a("body").find(".ui-combobox").each(function(){a(this).attr("id")!="cbMain_"+b.id&&a(this).removeClass("focus")}).end().find(".ui-opts").each(function(){a(this).attr("id")!="cbOpts_"+b.id&&a(this).hide()})},enable:function(){this.cb.removeClass("disabled"),this._bind_main_events()},_bind_main_events:function(){var b=this;this.cb.bind("click.combobox",function(c){b.close_allOptions(),b._set_listPos(),b.list.toggle(),b.list.is(":visible")&&b._center_scroll(b.selectedIndex),a(this).toggleClass("focus"),a(document).one("click",function(){b.close()}),typeof FB!="undefined"&&FB.Canvas.setSize({width:810,height:a("#site").outerHeight()}),c.stopPropagation()}).bind("mousedown.combobox",function(){a(this).setFocus()}).bind("keypress.combobox",function(c){var d="",e=c.charCode||c.which,f=-1;e==13&&a(b.items[b.found_item]).hasClass("found")&&(a(b.items[b.found_item]).removeClass("found"),b.select(a(b.items[b.found_item]),b.found_item),b.found_item=-1,b.found_pressedKey="",b.close()),e&&e>=32&&(d=String.fromCharCode(e).toUpperCase(),b.items.removeClass("found").each(function(c){var e=a(this).text().toUpperCase().indexOf(d);e===0&&f<0&&(f=c);if(d!=b.found_pressedKey){if(e===0)return b.found_pressedKey=d,b.found_item=c,b._center_scroll(c),a(this).addClass("found"),!1}else{if(c>b.found_item&&e===0)return b.found_item=c,b._center_scroll(c),a(this).addClass("found"),!1;if(c==b.items.length-1)return b.found_item=f,b._center_scroll(c),a(b.items[f]).addClass("found"),!1}}))})},_init_caption:function(){this.caption=a("span",this.cb);if(this.options.hide_label){var b=this.element.prev("label");b.length&&(this.caption.text(b.text()),b.hide())}else this.caption.text(a(a(".option",this.list)[this.element[0].selectedIndex]).text())},_center_scroll:function(b){var c=a(this.items[b]),d=a(".cb-scroll-box",this.list);d.scrollTop(c.position().top-168+parseInt(d.height()/2))},_get_cbWidth:function(a){var b=this._toInt(a.css("border-left-width")),c=this._toInt(a.css("border-right-width")),d=this._toInt(a.css("padding-left")),e=this._toInt(a.css("padding-right"));return this.element.outerWidth()-b-c-d-e},_set_listPos:function(){var a=this.cb.offset();this.list.css({left:a.left+"px",top:this.cb.height()+a.top+"px"})},_toInt:function(a){return parseInt(a.substr(0,a.length-2))},_get_list:function(){var b=this,c="";return a("option",this.element).each(function(d){var e="option";a(this).is(":disabled")&&(e+=" disabled");if(b.selectedIndex==d||a(this).is(":selected"))b.selectedIndex=d,e+=" selected";c+='<li class="'+e+'" data-value="'+a(this).attr("value")+'">'+a(this).text()+"</li>"}),'<div id="cbOpts_'+this.id+'" class="ui-opts"><div class="cb-scroll-box"><ul>'+c+"</ul></div></div>"}})})(jQuery),function(a){a.widget("Ondango.checkbox",{chb:null,label:null,options:{chb_class:""},_create:function(){var b=this,c="ui-checkbox"+(this.options.chb_class.length?" "+this.options.chb_class:"");c=this.element.is(":checked")?c+" checked":c,this.chb=a('<div class="'+c+'"><!-- --></div>'),this.label=a("label[for="+this.element.attr("id")+"]"),this.element.hide(),this.chb.insertAfter(this.element).click(function(){b.toggleStatus()}),this.label.length&&this.label.addClass("ui-label").mouseover(function(){b.chb.addClass("hover")}).mouseout(function(){b.chb.removeClass("hover")}).click(function(a){a.preventDefault(),b.toggleStatus()})},toggleStatus:function(){this.element.is(":checked")?(this.element.removeAttr("checked"),this.chb.removeClass("checked")):(this.element.attr("checked","checked"),this.chb.addClass("checked")),this.element.trigger("change")}})}(jQuery),function(a){a.widget("Ondango.countdown",{deal_status:null,date_start:null,date_end:null,time_range:null,setInt:null,options:{show_days:!0},_create:function(){var b=this;this.deal_status=a(this.element).attr("data-deal-status"),this.date_start=new Date,this.date_end=new Date(this.date_start.valueOf()+a(this.element).attr("data-remaining-time")*1e3),this.time_range=this.date_end-this.date_start,this.options.show_days||a(".days",this.element).next("sup").remove().end().remove(),this.display(),this.setInt=setInterval(function(){b.display()},1e3)},display:function(){var b=new Date-this.date_start,c=this.time_range-b;if(c<=0){clearInterval(this.setInt),this.deal_status!="going_to_start"&&this.deal_status!="started";return}var d=this.get_timeLeft(c);this.options.show_days&&a(".days",this.element).html(d.days),a(".hrs",this.element).html(d.hours),a(".mins",this.element).html(d.minutes),a(".secs",this.element).html(d.seconds)},get_timeLeft:function(a){var b=new Object,c=Math.floor(a/864e5);a=a-c*864e5,b.days=this._add_zero(c);var d=Math.floor(a/36e5);a=a-d*36e5,d=this.options.show_days?d:d+c*24,b.hours=this._add_zero(d);var e=Math.floor(a/6e4);a=a-e*6e4,b.minutes=this._add_zero(e);var f=Math.floor(a/1e3);return b.seconds=this._add_zero(f),b},_add_zero:function(a){return(a<10?"0":"")+a.toString()}})}(jQuery),function(a){a.widget("Ondango.gallery",{is_popup_slider_initialized:!1,video_source_code:null,options:{thumb_btn:"a.thumb-btn",video_btn:".video-large-btn, .video-thumb-btn",large_btn:"a.large-btn",close_btnCaption:"Close",ajax_path:"",popup_html:'<div id="ui-img-xl-box">\t<div class="img-xl-gallery">\t\t<div class="xlarge-boxes">\t \t\t<div class="xlarge-box"> \t\t\t\t<img src="" class="xlarge" alt="" /> \t\t\t</div>\t\t</div>\t</div>\t<div class="xlarge-box-video"></div>\t<div class="button-box"><a href="#" class="button">Close</a></div></div>'},_create:function(){var b=this;this.thumb_btns=a(this.options.thumb_btn,this.element),this.video_btns=a(this.options.video_btn,this.element),this.large_btn=a(this.options.large_btn,this.element),this.large_img=a(this.options.large_btn+" img",this.element),a(this.options.popup_html).appendTo("body").hide(),this.xlarge_popup=a("#ui-img-xl-box","body"),this.xlarge_gallery=a(".img-xl-gallery",this.xlarge_popup),this.xlarge_box=a(".xlarge-box",this.xlarge_popup),this.xlarge_box_video=a(".xlarge-box-video",this.xlarge_popup),this.xlarge_closeBtn=a("a.button",this.xlarge_popup),this.element.hide().delay(1e3).css({visibility:"hidden",display:"block"}),setTimeout(function(){typeof FB!="undefined"&&FB.Canvas.setSize()},1500),this.element.css({visibility:"visible",display:"none"}).fadeIn("fast"),a(this.thumb_btns[0]).click(),this.preload_images(),this.init_video(),this.init_close_popup(),this.check_isOnlyOneImage(),this.init_keyboardEvents(),this.thumb_btns.click(function(c){c.preventDefault();var d=a(this).data("src-l");b.large_img.attr("src")!=d&&(b.large_btn.data("src-xl",a(this).data("src-xl")),b.large_img.attr("src",d),typeof FB!="undefined"&&FB.Canvas.setSize())}),a(b.options.large_btn,a(b.element)).click(function(a){a.preventDefault(),this.is_popup_slider_initialized?b.show_popup_gallery(a.currentTarget):(b.init_popup_gallery(a.currentTarget),this.is_popup_slider_initialized=!0)})},preload_images:function(){this.thumb_btns.each(function(){a.imgPreLoad.add(a(this).data("src-l")),a.imgPreLoad.add(a(this).data("src-xl"))})},check_isOnlyOneImage:function(){this.thumb_btns.length>0?this.is_only_one_image=!1:this.is_only_one_image=!0},init_video:function(){var b=this;this.video_btns.click(function(c){c.preventDefault(),b.video_source_code!==null?b.show_popup_with_video():b.load_video(a(this).data("product_id"))})},load_video:function(b){var c=this;a.ajax({url:c.options.ajax_path+"product/video/"+b,type:"POST",dataType:"json",data:{is_ajax:!0},success:function(a){!a.length&&a.error=="ERROR"?console.log("Something went wrong with the video."):(c.video_source_code=a.video_embed,c.show_popup_with_video())}})},show_popup_with_video:function(){this.xlarge_box_video.html(this.video_source_code),this.toggle_galleryVideo("video"),this.xlarge_popup.show()},init_close_popup:function(){var a=this;this.xlarge_closeBtn.text(this.options.close_btnCaption).click(function(b){b.preventDefault(),a.xlarge_popup.fadeOut("fast"),key.setScope("all"),a.xlarge_box_video.html("")})},init_popup_gallery:function(a){this.is_only_one_image?this.prepare_one_big_image():(this.prepare_big_images(),this.create_navigation()),this.show_popup_gallery(a)},show_popup_gallery:function(b){this.toggle_galleryVideo("gallery"),this.xlarge_popup.show();var c=a(b).data("src-xl"),d=this.xlarge_gallery.find("img").filter('[src="'+c+'"]').closest(".xlarge-box");this.show_big_image(d),key.setScope("galleryActive")},show_big_image:function(a){this.xlarge_gallery.find(".xlarge-box").hide(),a.show(),this.$currently_visible_big_image=a},toggle_galleryVideo:function(a){a==="gallery"?(this.xlarge_box_video.hide(),this.xlarge_gallery.show()):a==="video"&&(this.xlarge_gallery.hide(),this.xlarge_box_video.show())},create_navigation:function(){var b=this;this.xlarge_gallery.prepend('\t<div class="pager"><div class="prev"><span> </span></div><div class="next"><span> </span></div></div>').hover(function(){a(this).find(".pager").show()},function(){a(this).find(".pager").hide()}),this.$prevLink=a("div.prev span"),this.$nextLink=a("div.next span"),this.$prevLink.click(function(a){b.$currently_visible_big_image.prev().length>0?b.show_big_image(b.$currently_visible_big_image.prev()):b.show_big_image(b.xlarge_gallery.find(".xlarge-box").last())}),this.$nextLink.click(function(a){b.$currently_visible_big_image.next().length>0?b.show_big_image(b.$currently_visible_big_image.next()):b.show_big_image(b.xlarge_gallery.find(".xlarge-box").first())})},prepare_big_images:function(){var b=this,c=a("");this.thumb_btns.each(function(d,e){var f=b.xlarge_box.clone();f.find("img").attr("src",a(e).data("src-xl")),c=c.add(f)}),b.xlarge_gallery.find(".xlarge-boxes").html(c)},prepare_one_big_image:function(){var b=this.xlarge_box.clone();b.find("img").attr("src",a(this.options.large_btn).data("src-xl")),this.xlarge_gallery.find(".xlarge-boxes").html(b)},init_keyboardEvents:function(){var b=this;key("esc",function(){b.xlarge_closeBtn.trigger("click")}),key("left","galleryActive",function(){a("div.prev span").trigger("click")}),key("right","galleryActive",function(){a("div.next span").trigger("click")})}})}(jQuery),function(a){a.widget("Ondango.lightbox",{popup:null,close_btn:null,pos_allowed:new Array("center","top","bottom","above","below"),options:{position:"top",pos_margin:6,content_maxHeight:460,borders_height:88,content:"",contentAJAX:{url:"",params:{}},onLoad_callback:function(a,b){},closeBtn_label:"Close",html:'<div class="ui-lightbox">\t<div class="lbox-main">\t\t<div class="lbox-content loading"></div>\t\t<div class="button-box">\t\t\t<a class="close button right no-mar" href="#"></a>\t\t</div>\t</div></div>'},_create:function(){var b=this;a(this.element).click(function(){return b._remove_popups(),b.popup=a(b.options.html).appendTo("body").hide(),b.close_btn=a(".close.button",b.popup).text(b.options.closeBtn_label).click(function(){return b.close_popup(),!1}),b.load_content(),!1})},_remove_popups:function(){a(".ui-lightbox").remove()},load_content:function(){var b=this,c=a(".lbox-content",this.popup);this.options.contentAJAX.url!=undefined&&this.options.contentAJAX.url.length?(this.show_popup(),a.post(this.options.contentAJAX.url,this.options.contentAJAX.params,function(d){c.removeClass("loading"),c.html(d),b.set_height(),b.set_position(),b.options.onLoad_callback(a(b.element),b.popup)})):(c.removeClass("loading"),c.html(this.options.content),this.set_height(),this.show_popup(),this.options.onLoad_callback(a(this.element),this.popup))},show_popup:function(){this.set_position(),this.popup.fadeIn(0)},close_popup:function(){this.popup.fadeOut("fast",this._remove_popups)},set_position:function(b){var c=this._validate_pos(b!=undefined?b:this.options.position),d=this.popup.outerHeight(),e=a(this.element).offset();this.popup.css("position","absolute");switch(c){case"center":var f=(a(window).height()-d)/2+a(window).scrollTop();this.popup.css("top",(f<0?0:f)+"px");break;case"top":var f=this.options.pos_margin;this.popup.css("top",(f<0?0:f)+"px");break;case"bottom":var f=this.options.pos_margin;this.popup.css("bottom",(f<0?0:f)+"px");break;case"above":var f=e.top-(d+this.options.pos_margin);this.popup.css("top",(f<0?0:f)+"px");break;case"below":var f=e.top+this.element.height()+this.options.pos_margin;this.popup.css("top",(f<0?0:f)+"px")}},set_height:function(){var b=a(window).height(),c=this.popup.height()>this.options.content_maxHeight+this.options.borders_height?this.options.content_maxHeight+this.options.borders_height:this.popup.height(),d=a(".lbox-content",this.popup);c>b?d.css("max-height",b-this.options.borders_height+"px"):d.css("max-height",this.options.content_maxHeight+"px")},_validate_pos:function(a){var b=!1;for(var c=0;c<this.pos_allowed.length;c++)if(a==this.pos_allowed[c]){b=!0;break}return b?a:"center"}})}(jQuery),function(a){function c(){a.ajax({url:cfg.paths.ajax+"payment/hosted/status",dataType:"json",cache:!1,success:function(a){a.do_redirect?window.location.href=a.url:setTimeout(c,1e3)}})}function d(b){var c=a("#site"),d=a("#fb-loading-box"),b=b!=undefined?b:!1;b==!0?d.find("p").show():d.find("p").hide(),c.is(":visible")?(c.hide(),d.show(),e.update({w:810,h:320,scroll_toTop:!0})):(d.hide(),c.fadeIn("fast"),e.update({w:810,h:c.outerHeight(!0),scroll_toTop:!1}));try{parent.socket!=undefined&&parent.socket.postMessage("scrollToTop")}catch(f){}}function f(b){d(),setTimeout(function(){a.ajax({url:cfg.paths.ajax+"products/deep_linking_redirect/",type:"POST",dataType:"script",data:{app_url:b}})},1500)}function g(b){a("#SaleComment").val()==cfg.i18n.enterMessage&&a("#SaleComment").val("");if(b.PaymentMethod.use_gateway==!0){var c=a("head").hasClass("is_SooF");a.ajax({url:cfg.paths.ajax+"payment/get-gateway/"+b.Shop.slug,type:"POST",dataType:"json",cache:!1,data:{is_ajax:!0,is_shopInIframe:c,host_url:c?parent.easyXDM.query.host_url:null,gateway:b.PaymentMethod.gateway_name,"Customer-id":b.Customer.id,"Sale-comment":a("#SaleComment").val(),"Sale-order_published":a("#SaleOrderPublished").val()},success:function(c,e){if(c.error)d(),a("<a></a>").appendTo("body").lightbox({closeBtn_label:cfg.i18n.Close,content:'<div class="content"><p>'+c.error_msg+"</p></div>"}).click().remove(),a("a.place-order").removeClass("disabled"),a("a.place-order").removeAttr("disabled");else if(c.do_redirect){var f=c.gateway_url[0].replace(/\\/gi,"");parent.location.href=f}else{var f=c.gateway_url[0].replace(/\\/gi,"");location.href=cfg.paths.ajax+"payment/hosted/"+b.Shop.slug+"/?optile_url="+escape(f)}}})}else a("a.place-order").closest("form").submit();return d(!0),!1}projectInit={immediate:function(){},domReadyOnce:function(){a(".hidden").hide().removeClass("hidden"),a("#site").hide(),e.init(),d(),h.check_hash(),a(".categories").each(function(){a(this).css({visibility:"hidden",display:"block"});var b=a(this).prev(".select-category"),c=b.find("em"),d=b.width()-c.outerWidth();a(this).css({display:"none",left:d+"px",visibility:"visible"})})},everyDomReady:function(j){function r(){var b=a(".fb_send_button_form_widget");if(b.length&&b.is(":visible")){var c=a("#site").outerHeight(!0),d=b.outerHeight(!0),f=b.offset(),g=f.top+d;g>c&&(a(".social-plugins").die("hover"),a("#main_container, #site").height(g),e.update({w:810,h:f.top+d,scroll_toTop:!1}))}}function s(){r(),setTimeout(r,5e3)}a(".js-loading").click(function(){return d(),!0});if(a.browser.webkit!=undefined){var k=a("#ProductVariationId");if(k.length){var l=k.children();for(var m=0;m<l.length;m++)if(a(l[m]).attr("disabled")!="disabled"){k.val(a(l[m]).val());break}}}a(".fan-discount-banner .call-to-action").FB_likeCallback("set_fanStatus","unset_fanStatus"),a("input.custom[type=checkbox]").checkbox(),a(".alert-box, .info-box").delay(45e3).slideUp("fast"),a(".select-category").click(function(b){function f(){c.toggleClass("clicked")}var c=a(this),d=c.next(".categories"),e=a(".selected",d);a(document).one("click",function(){d.toggle(0,f)}),d.toggle(0,f),b.stopPropagation()}),a(".search-ipt").focusBlur(),a(".search-btn").click(function(){var b=a(this),c=b.next("form"),d=b.closest(".search");c.toggle(0,function(){d.toggleClass("clicked")})}),a(".legal-btn").each(function(){var b=a(this).attr("href").substr(1);a(this).lightbox({position:"above",closeBtn_label:cfg.i18n.Close,onLoad_callback:h.init_inPopupLinks,contentAJAX:{url:cfg.paths.ajax+"shop/get-info/"+b,params:{is_ajax:!0}}})}),a(".shipping-btn").each(function(){var b=a(this).attr("data-pos")!=undefined?a(this).attr("data-pos"):"top";a(this).lightbox({position:b,pos_margin:45,closeBtn_label:cfg.i18n.Close,contentAJAX:{url:cfg.paths.ajax+"shop/get-shipping-cost",params:{is_ajax:!0}}})}),a(".shipping-btn-footer").lightbox({position:"above",closeBtn_label:cfg.i18n.Close,contentAJAX:{url:cfg.paths.ajax+"shop/get-shipping-cost",params:{is_ajax:!0}}}),a(".florange-btn").lightbox({position:"above",closeBtn_label:cfg.i18n.Close,content:'<h1>Join Florange</h1><div class="content"><p>some text</p></div>'}),a(".countdown").countdown(),i(j),a(".highlight .mask-box .cover").positionate_cover(),a(".products").set_uniformHeight(),a(".ui-gallery").gallery({ajax_path:cfg.paths.ajax,close_btnCaption:cfg.i18n.Close});var n=function(b){a.ajax({type:"POST",url:cfg.paths.ajax+"should_i_get_it/publish/",dataType:"json",data:{is_ajax:!0,widget_id:b},success:function(a){a.success!==!0},error:function(a){console.log("Ajax error")}})},o=function(a){FB.ui({method:"feed",link:a.widget_page_url,display:"iframe",actions:{name:"Visit shop",link:a.link_to_shop}},function(b){b&&b.post_id&&n(a.widget_id)})};a("#should-i-get-it-button").click(function(b){b.preventDefault();var c=a(this);a.ajax({type:"POST",url:cfg.paths.ajax+"should_i_get_it/create/",dataType:"json",data:{is_ajax:!0,customer_id:c.data("customer"),product_id:c.data("product"),shop_id:c.data("shop"),fanpage_id:c.data("fanpage")},success:function(a){a.success===!0?o(a):console.log("Widget not created")},error:function(a){console.log("Ajax error")}})});var p=function(){var b=a("#sigi-widget-container");b.length>0&&a.ajax({type:"POST",url:cfg.paths.ajax+"should_i_get_it/"+b.data("wid"),dataType:"html",data:{is_ajax:!0},success:function(a){b.html(a).removeClass("loading-content")},error:function(a){console.log("Ajax error")}})};p();var q=function(){var b=a("#should-i-get-it-tooltip-content");setTimeout(function(){b.css({opacity:0}).show().animate({bottom:29,opacity:1},"fast")},6e3),setTimeout(function(){b.fadeOut("fast")},11e3)};q(),a(".social-plugins").hover(s,s);if(a(".share-link").length){var t=a(".share-link"),u=a(".sl-btn",t),v='<div class="sl-wrapper">\t<div class="sl-neck"><!-- --></div>\t<div class="sl-box">\t\t<input class="sl-input" type="text" readonly="readonly" value="" />\t</div></div>';a(v).appendTo(t),a(".sl-input",t).val(u.attr("href")),u.click(function(){return a(this).toggleClass("clicked"),a(".sl-wrapper").toggle().find(".sl-input").select(),!1})}a(".deep-linking").length&&f(a(".deep-linking").attr("data-app-url")),a(".description .short").length&&a('<a class="see-more" href="#">'+cfg.i18n.See_more+"<em></em></a>").insertAfter(".description .long").click(function(){return a(this).hide(),a(".description .short, .description .long").toggle(),e.update(),!1}),a(".shipping-price").each(function(){var b=a(this),c=a(".price",b),d=a(".additional-price",b),e=a(".additional-price-label",b),f=a(".brazil-info",b);a(".country",b).change(function(){if(a(this).val()=="BR|BR")f.show(),c.html(""),d.hide(),e.hide();else{var b=a(this).val().split("|");c.html(b[0]),d.html(b.length==1?b[0]:b[1]),d.is(":visible")||(f.hide(),d.show(),e.show())}})}),a(".add-to-cart[type=submit]").click(function(){return cfg.debug<2&&Webtrekk.addToCart({quantity:1,shop_slug:a("#ShopSlug").val(),product_id:a("#ProductId").val(),price:a("#ProductPrice").val(),currency:a("#ShopCurrencyCode").val(),title:a("#ProductTitle").val()}),!0}),a(".remove-btn").click(function(){return a(this).closest("form").submit(),!1}),a(".one-less, .one-more").click(function(){if(a(this).hasClass("disabled"))return!1;var b=1,c=a(this).closest("form"),e=c.attr("data-unique-id"),f=a("#ProductQuantity_"+e),g=parseInt(f.val());return a(this).hasClass("one-less")?b=-1:cfg.debug<2&&Webtrekk.addToCart({quantity:1,shop_slug:a("#ShopSlug_"+e).val(),product_id:a("#ProductId_"+e).val(),price:a("#ProductPrice_"+e).val(),currency:a("#CurrencyCode_"+e).val(),title:a("#ProductTitle_"+e).val()}),d(),f.val(g+b),c.submit(),!1}),a("#coupon-box").submit(function(){return a("#coupon-message").text(""),a.post(cfg.paths.ajax+"cart/redeem-coupon",{is_ajax:!0,"Shop-coupon_discount_code":a("#ShopCouponDiscountCode").val()},function(b){b.is_error==!1?(a("#coupon-message").text(""),window.location.href=window.location.href):a("#coupon-message").text(b.error_msg)},"json"),!1}),a(".brazil-shipping-estimation .estimate-shipping-btn").click(function(){var b=a("#shipping_estimation span");return a.getJSON(cfg.paths.ajax+"shipping/estimate-price",{is_ajax:1,zipcode:a("#CustomerZipcode").val(),shipping_type:a("#CustomerShippingService").val(),product_id:a(this).attr("product-data"),slug_shop:a(this).attr("shop-data")},function(c){c.error==1?b.html(cfg.i18n.Error+", "+c.message):b.html("R$ "+c.value),a("#shipping_estimation").fadeIn("fast")}),!1});var w=function(){var b=a("#recommendations-box");b.length>0&&a.ajax({type:"POST",url:cfg.paths.ajax+"products/recommendations/"+b.data("shop-slug"),data:{is_ajax:!0},success:function(c){b.html(c).removeClass("loading-content").fadeIn("fast",function(){e.update({w:810,h:a("#site").outerHeight(!0),scroll_toTop:!1})})},error:function(a){b.removeClass("loading-content").hide()}})};w();var x=function(){var b=a("#external-recommendations-box");b.length>0&&a.ajax({type:"POST",url:cfg.paths.ajax+"products/external_recommendations/"+b.data("shop-slug"),data:{is_ajax:!0},success:function(c){b.html(c).removeClass("loading-content").fadeIn("fast",function(){e.update({w:810,h:a("#site").outerHeight(!0),scroll_toTop:!1})})},error:function(a){b.removeClass("loading-content").hide()}})};x(),a(".payment-method .error-message").hide(),a("select.payment-select").change(function(){var b=cfg.Payment.payOnDelivery_id,c=a(this).closest(".payment-select-box").find("p.payment-extra-info");a(this).val()==cfg.Payment.payOnDelivery_id?c.show():c.hide(),a(this).val()==cfg.Payment.payOnPickup_id||a(".payment-method").attr("data-onlyVirtualGoods")=="1"?(a("h2#shipping-address").text(cfg.i18n.Contact_details),a("#CustomerAddress").prev().html(cfg.i18n.Address+":<span>*</span>"),a("#CustomerZipcode").prev().html(cfg.i18n.Zip_code+":<span>*</span>"),a("#CustomerCity").prev().html(cfg.i18n.City+":<span>*</span>")):(a("h2.shipping-address").text(cfg.i18n.Shipping_address),a("#CustomerAddress").prev().html(cfg.i18n.Address+":"),a("#CustomerZipcode").prev().html(cfg.i18n.Zip_code+":"),a("#CustomerCity").prev().html(cfg.i18n.City+":")),a(".error-message").parent().removeClass("error")}),a("#CustomerCountryId").change(function(){a("#ShopCountryCode").val()=="BR"&&(a(this).val()==cfg.Shop.brazil_id+""?a("#CustomerShippingService").closest(".input.select").show():a("#CustomerShippingService").closest(".input.select").hide())}),a(".payment-method .button[type=submit]").click(function(){var b=a(this);return a("#CustomerCountryId").val()==cfg.Shop.brazil_id&&a("#ShopCountryCode").val()=="BR"?a.getJSON(cfg.paths.ajax+"shipping/estimate-price",{is_ajax:1,zipcode:a("#CustomerZipcode").val(),slug_shop:a("#ShopSlug").val(),shipping_type:a("#CustomerShippingService").val()},function(c){if(c.error==1){var e=a("#CustomerZipcode").closest("div.input"),f=e.children(".error-message");f.length?f.html(c.message).show():a('<div class="error-message">'+c.message+"</div>").appendTo(e).show(),e.addClass("error"),d()}else b.closest("form").submit()}):b.closest("form").submit(),!1}),a(".payment-iframe").length&&c(),a("#SaleComment").focusBlur(),a("#CustomerNewsletter").change(function(){a(this).is(":checked")?a("#CustomerEmailNewsletter").fadeIn(0):a("#CustomerEmailNewsletter").fadeOut("fast")}),a("#CustomerTermsOfUse").change(function(){a(this).is(":checked")&&a("#acceptToS").is(":visible")&&a("#acceptToS").fadeOut("fast")}),a("a.place-order").click(function(b){return b.preventDefault(),a(this).hasClass("disabled")?!1:a("#CustomerTermsOfUse").is(":checked")?(a("#acceptToS").fadeOut("fast"),typeof FB==undefined||js_data.is_localhost?(g(js_data),!1):(a(this).addClass("disabled"),a(this).attr("disabled","disabled"),FB.getLoginStatus(function(b){b.status==="connected"?FB.ui({method:"feed",caption:js_data.Shop.name,name:js_data.FB_dialog.name,link:js_data.FB_dialog.deepLinking_url+"/?ref="+js_data.Shop.id+"-share-pur",description:"...",properties:js_data.FB_dialog.properties,actions:js_data.FB_dialog.actions,display:"iframe"},function(b){a("#SaleOrderPublished").val(b==!1?"0":"1"),g(js_data)}):g(js_data)},!0),!1)):(a("#acceptToS").show(),!1)}),a("select.custom").combobox(),a("select.custom-right").combobox({cb_class:"right"}),b.init()}};var b={init:function(){this._is_secondLevelAvailable=this._check_secondLevel(),this._init_firstLevel(),this._is_secondLevelAvailable&&this._init_secondLevel()},_init_firstLevel:function(){var b=this;a("select.product-variation-select").combobox({hide_label:!0,changed_callback:function(c){if(b._is_secondLevelAvailable){var d=a(c).val();a(".product-variation-2").hide(),a("#"+d).show(),a("#"+d).find(".product-variation-2-select").combobox("enable")}else b._set_productVariationId(a(c).val())}})},_init_secondLevel:function(){var b=this;a("select.product-variation-2-select").combobox({hide_label:!0,is_disabled:!0,changed_callback:function(c){b._set_productVariationId(a(c).val())}}),a(".product-variation-2").hide().eq(0).show()},_check_secondLevel:function(){return a(".product-variation-2").length>0?!0:!1},_set_productVariationId:function(b){a("#ProductVariationId").val(b)}},e={h_offset:20,max_loops:100,init:function(){var b=this,c=setInterval(function(){typeof FB!="undefined"&&(clearInterval(c),b.update({w:810,h:a("#site").outerHeight(!0),scroll_toTop:!0}),b.auto_grow())},5)},update:function(a){typeof FB!="undefined"&&(a.scroll_toTop==!0&&FB.Canvas.scrollTo(0,0),FB.Canvas.setSize({width:a.w,height:a.h+this.h_offset}),setTimeout(function(){FB.Canvas.setSize()},1500));try{parent.socket!=undefined&&parent.socket.postMessage("resizeIframe|"+(a.h+this.h_offset))}catch(b){}},auto_grow:function(){var b=this,c=a("#site").outerHeight(!0),d=0,e=setInterval(function(){typeof FB!="undefined"&&(a("#site").outerHeight(!0)!=c&&(c=a("#site").outerHeight(!0),b.update({w:810,h:c,scroll_toTop:!1})),++d>b.max_loops&&clearInterval(e))},200)}};a.fn.set_uniformHeight=function(){var b=a(this).parent().parent().hasClass("recommendations")?25:38,c=parseInt(a(this).attr("data-prods-per-row")),d=a(this).find(".product"),e=[];for(var f=0;f<=d.length;f++){if(f%c==0&&f>0||f==d.length){var g=!0,h=!0,i=!0;for(var j=0;j<e.length;j++)if(e[j].len>b){g=!1;break}for(var j=0;j<e.length;j++)if(e[j].len>b*2){h=!1;break}for(var j=0;j<e.length;j++)if(e[j].len>b*3){i=!1;break}if(g)for(var j=0;j<e.length;j++){var k=a(d[e[j].id]).find("h2");k.height(parseInt(k.height()/3)+2)}else if(h)for(var j=0;j<e.length;j++){var k=a(d[e[j].id]).find("h2");k.height(parseInt(k.height()/3)*2+2)}else if(i)for(var j=0;j<e.length;j++){var k=a(d[e[j].id]).find("h2");k.height(parseInt(k.height()/3)*3+2)}e=[]}e.push({id:f,len:a(d[f]).find("h2").text().length})}},a.fn.positionate_cover=function(){var b=850,c=315,d=parseInt(a(this).attr("data-offset-y")),e=a(this).width(),f=a(this).height(),g=b*f/e-c;a(this).css({top:parseInt(g*d/100*-1)+"px"})};var h={check_hash:function(){if(window.location.hash.length>1){var b=this,c=window.location.hash.substr(1);switch(c){case"tos":case"privacy_policy":case"return_policy":case"imprint":a("<a></a>").appendTo("body").lightbox({closeBtn_label:cfg.i18n.Close,onLoad_callback:b.init_inPopupLinks,contentAJAX:{url:cfg.paths.ajax+"shop/get-info/"+c,params:{is_ajax:!0}}}).click().remove();break;case"shipping-details":a("<a></a>").appendTo("body").lightbox({closeBtn_label:cfg.i18n.Close,onLoad_callback:b.init_inPopupLinks,contentAJAX:{url:cfg.paths.ajax+"shop/get-shipping-cost",params:{is_ajax:!0}}}).click().remove();break;case"payment-error":a("<a></a>").appendTo("body").lightbox({closeBtn_label:cfg.i18n.Cloase,content:"<h1>"+cfg.i18n.Error+'</h1><div class="content"><p>'+cfg.i18n.paymentFailure+"</p></div>"}).click().remove();break;case"terms-of-service":a("<a></a>").appendTo("body").lightbox({closeBtn_label:cfg.i18n.Cloase,content:'<div class="content"><p>'+cfg.i18n.acceptToS+"</p></div>"}).click().remove()}}},init_inPopupLinks:function(b,c){a('.lbox-content a[href^="#"]',c).click(function(){return window.location.hash=a(this).attr("href"),h.check_hash(),!1})}},i=function(b){var c={linkFn:function(a){a=="show"?this.animate({opacity:1},{duration:500}):this.animate({opacity:.3},{duration:500})},init:function(b,c){a(c.instance.prevLink,c.instance.nextLink).removeClass("show"),c.instance.nextLink.is(".show")||c.instance.nextLink.css({opacity:.3}),c.instance.prevLink.is(".show")||c.instance.prevLink.css({opacity:.3})}};a("div.teaser-wrapper",b).each(function(){a(".highlight",a(this)).length>1&&a(this).prepend('\t<div class="pager"><div class="prev"><span> </span></div><div class="next"><span> </span></div></div>').scroller({prevLink:"div.prev span",nextLink:"div.next span",atoms:".highlight",diashow:7e3,init:c.init,linkFn:c.linkFn}).hover(function(){a(this).find(".pager").css("display","block")},function(){a(this).find(".pager").css("display","none")}),a(".highlight .box",a(this)).each(function(){var b=a(".box-arrow",this);b.css({top:parseInt(a(this).height()/2-b.height()/2)+"px"})})})};projectInit.immediate(),a(projectInit.domReadyOnce),a(function(){projectInit.everyDomReady(document)}),a(document).bind("dommodified",function(a){projectInit.everyDomReady(a.target)})}(jQuery);
